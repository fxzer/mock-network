# 👨‍💼 Background (后台服务)

> **位置**: `src/background`
> **核心文件**: `index.js`
> **角色**: 总经理 / 后台调度中心

## 这是什么？

在 Chrome 扩展中，**Background** 就像是一个一直在后台默默工作的"总经理"。

- 它不直接和网页内容打交道（它看不见网页里长什么样）。
- 它独立于任何标签页运行。
- 只要浏览器开着，扩展被启用了，它就随时待命。

## 它的工作职责

在 MockNetwork 项目中，这位"总经理"主要管三件事：

### 1. 📢 状态管理 (管图标)

你看浏览器右上角那个扩展小图标，有时候上面会有 "ON" 或 "OFF" 的字样，或者背景颜色会变。
这就是 Background 在控制。它负责告诉用户："嘿，我现在是开启状态，正在拦截请求哦！"

### 2. 🖱️ 监听指挥 (点图标)

当你点击那个扩展图标时，其实是给 Background 发了一个信号。
它收到信号后，会下达命令给当前的网页（通过 [Content Script](../content/README.md)）："把侧边栏打开/关上！"

### 3. 💾 数据同步 (管记账)

它监听着浏览器的存储（`chrome.storage`）。如果配置变了，它虽然不直接干活，但它负责确保各个部门都知道配置更新了。

## 代码简析

打开 `index.js`，你会看到类似这样的逻辑：

- `chrome.action.onClicked.addListener(...)`: 监听图标被点击。
- `chrome.tabs.sendMessage(...)`: 给当前网页发消息（"开门/关门"）。
- `updateBadge(...)`: 更新图标上的文字（ON/OFF）。
