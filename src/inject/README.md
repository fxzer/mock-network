# 🕵️ Inject (注入脚本)

> **位置**: `src/inject`
> **核心文件**: `index.js`, `mock.js`
> **角色**: 特工 / 拦截专家 / 替身攻击

## 这是什么？

这是整个项目中**最核心、最硬核**的部分。
这些代码会被 [Content Script](../content/README.md) 强行插入到网页的 `<head>` 中运行。它和网页原本的 JavaScript 运行在完全相同的环境里。

## 它的工作原理 (通俗版)

想象一下，网页平时发请求（寄快递）都需要找 **浏览器自带的邮局**（`XMLHttpRequest` 和 `fetch`）。

Inject 脚本做的事情就是：**霸占邮局窗口，自己开个冒牌窗口**。

1. **偷梁换柱**:
   它把自己写好的 `myXHR` 和 `myFetch` 函数，赋值给全局的 `window.XMLHttpRequest` 和 `window.fetch`。
   这样，网页代码以为自己在调浏览器的接口，其实是在调我们的代码。

2. **中间人攻击 (拦截)**:
   当网页发请求时，先经过我们的代码。
   - 我们的代码拿着请求去查**规则列表**。
   - **没匹配到规则**：放行，调用原本浏览器的接口发出去。
   - **匹配到了**：
     - 如果是要**修改请求**：改完参数再发出去。
     - 如果是要**Mock 响应**：根本不发请求，直接伪造一个数据返回给网页（网页完全不知道这是假的）。

## 核心文件

- **`index.js`**: 包含了拦截逻辑、重写 XMLHttpRequest/Fetch 的代码。
- **`mock.js`**: 引入了著名的 Mock.js 库，方便我们生成随机数据（比如随机姓名、随机这片）。

## ⚠️ 注意事项

因为改写了浏览器的底层对象，所以这部分代码要非常小心，一旦出错，可能会导致网页原本的功能瘫痪。
